# PRD: 랜덤 조 편성기 (Team Randomizer)

## 1. 개요

### 1.1 프로젝트 명
**랜덤 조 편성기 (Team Randomizer)**

### 1.2 목적
N명의 참가자를 4개 조에 공정하게 랜덤 배분하는 웹 기반 도구를 제공한다.
누구나 접근 가능하도록 GitHub Pages를 통해 무료 배포한다.

### 1.3 배경
- 팀 빌딩, 스터디 그룹, 회의 조 편성 등에서 공정한 랜덤 배분 필요
- 별도 설치나 로그인 없이 즉시 사용 가능한 도구 필요
- 랜덤 결과의 신뢰성을 검증할 수 있는 기능 필요

---

## 2. 목표

| 구분 | 목표 |
|------|------|
| 사용성 | 별도 설치/로그인 없이 브라우저에서 즉시 사용 |
| 접근성 | 누구나 무료로 접근 가능 (GitHub Pages 배포) |
| 공정성 | 랜덤 알고리즘의 균등 분포 보장 및 검증 기능 제공 |
| 유연성 | 참가자 명단 수정 및 조장 고정 배치 지원 |

---

## 3. 개발 원칙

본 프로젝트는 **Kent Beck의 TDD**, **Agentic Coding**, **Context7 MCP**, **Playwright MCP**를 통합하여 개발한다.

### 3.1 Kent Beck의 TDD (Test-Driven Development)

#### Red-Green-Refactor 사이클

```
    ┌─────────┐      ┌─────────┐      ┌─────────────┐
    │   RED   │ ───▶ │  GREEN  │ ───▶ │  REFACTOR   │
    │ (실패)  │      │ (통과)  │      │ (개선)      │
    └─────────┘      └─────────┘      └─────────────┘
         │                                    │
         └────────────────────────────────────┘
                       (반복)
```

| 단계 | 설명 |
|------|------|
| **RED** | 구현 전 실패하는 테스트를 먼저 작성한다 |
| **GREEN** | 테스트를 통과하는 가장 단순한 코드를 작성한다 |
| **REFACTOR** | 테스트 통과 상태를 유지하며 코드를 개선한다 |

#### TDD 핵심 규칙

- 프로덕션 코드 작성 전 반드시 실패하는 테스트 존재
- 한 번에 하나의 실패하는 테스트만 유지
- 테스트 통과에 필요한 최소한의 코드만 작성
- 모든 GREEN 단계 후 리팩토링 검토

### 3.2 Agentic Coding 방법론

AI 에이전트(Claude)가 자율적으로 개발을 수행하되, 체계적인 검증 루프를 통해 품질을 보장한다.

```
┌────────────┐    ┌────────────┐    ┌────────────┐
│   PLAN     │───▶│  EXECUTE   │───▶│   VERIFY   │
│  (계획)    │    │  (실행)    │    │  (검증)    │
└────────────┘    └────────────┘    └────────────┘
      │                                    │
      └──────────── ITERATE ◀──────────────┘
                   (반복/개선)
```

#### 자율 검증 체크포인트

| 단계 | 검증 항목 | 도구 |
|------|----------|------|
| 코드 작성 후 | 문법 오류, 타입 체크 | IDE Diagnostics |
| 기능 구현 후 | 단위 테스트 실행 | 브라우저 콘솔 |
| UI 변경 후 | 시각적 검증 | **Playwright MCP** |
| 통합 후 | E2E 테스트 | **Playwright MCP** |

### 3.3 Context7 MCP 활용

최신 라이브러리 문서와 코드 예제를 실시간으로 참조하여 정확한 구현을 보장한다.

#### 활용 프로세스

```
1. resolve-library-id 호출
   └── libraryName + query로 라이브러리 ID 획득

2. query-docs 호출
   └── libraryId + 구체적 질문으로 문서 조회

3. 문서 기반 정확한 코드 작성
```

#### 본 프로젝트 활용 영역

| 기술 | 활용 목적 |
|------|----------|
| Playwright | E2E 테스트 API, 스크린샷 캡처 |
| JavaScript | ES6+ 문법, Web API |
| CSS | 최신 레이아웃 기법 (Grid, Flexbox) |

### 3.4 Playwright MCP 활용

브라우저 자동화를 통한 **실제 화면 검증**으로 UI/UX 품질을 보장한다.

#### 핵심 도구

| 도구 | 용도 |
|------|------|
| `browser_navigate` | 페이지 접속 |
| `browser_snapshot` | 접근성 트리 기반 상태 확인 |
| `browser_take_screenshot` | **시각적 검증용 스크린샷** |
| `browser_click` | UI 인터랙션 테스트 |
| `browser_type` | 입력 필드 테스트 |
| `browser_console_messages` | JS 오류 확인 |

#### 시각적 검증 플로우

```
1. 로컬 서버 실행 (또는 file:// 프로토콜)
         ↓
2. browser_navigate로 페이지 접속
         ↓
3. browser_snapshot으로 페이지 구조 확인
         ↓
4. browser_take_screenshot으로 현재 상태 캡처
         ↓
5. 스크린샷 분석 및 UI 검증
         ↓
6. 문제 발견 시 수정 후 반복
```

#### 검증 체크리스트

**레이아웃**
- [ ] 요소들이 의도한 위치에 배치되었는가?
- [ ] 반응형 레이아웃이 올바르게 작동하는가?

**기능**
- [ ] 버튼 클릭 시 예상된 동작 수행되는가?
- [ ] 결과가 올바르게 표시되는가?

**시각적**
- [ ] 색상과 폰트가 디자인과 일치하는가?
- [ ] 아이콘이 올바르게 표시되는가?

### 3.5 통합 개발 워크플로우

```
┌─────────────────────────────────────────────────────────────┐
│                    통합 개발 사이클                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 요구사항 분석 (PRD 확인)                                 │
│                    ↓                                        │
│  2. Context7로 기술 문서 조회                                │
│                    ↓                                        │
│  3. RED: 실패하는 테스트 작성                                │
│                    ↓                                        │
│  4. GREEN: 최소 코드로 테스트 통과                           │
│                    ↓                                        │
│  5. Playwright MCP로 시각적 검증 (스크린샷)                  │
│                    ↓                                        │
│  6. REFACTOR: 코드 개선                                     │
│                    ↓                                        │
│  7. 전체 테스트 + 최종 스크린샷 검증                         │
│                    ↓                                        │
│                다음 기능으로 반복                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.6 커밋 규칙

| 단계 | 커밋 메시지 형식 | 예시 |
|------|-----------------|------|
| RED | `test: <설명>` | `test: 조 편성 버튼 클릭 테스트` |
| GREEN | `feat: <설명>` | `feat: 조 편성 기능 구현` |
| REFACTOR | `refactor: <설명>` | `refactor: 셔플 함수 분리` |
| 버그 | `fix: <설명>` | `fix: 균등 배분 오류 수정` |
| 스타일 | `style: <설명>` | `style: 결과 카드 레이아웃` |

### 3.7 품질 기준

| 항목 | 기준 |
|------|------|
| 테스트 커버리지 | 핵심 로직 100% |
| 시각적 검증 | 모든 UI 변경 시 스크린샷 확인 필수 |
| 콘솔 오류 | 0개 |
| 성능 | 2,000회 시뮬레이션 3초 이내 |

---

## 4. 사용자 스토리

### US-01: 기본 조 편성
> 사용자로서, 참가자 명단을 입력하고 버튼을 누르면 4개 조로 랜덤 배분된 결과를 보고 싶다.

### US-02: 디폴트 명단 사용
> 사용자로서, 미리 채워진 기본 명단을 활용하여 빠르게 조 편성을 하고 싶다.

### US-03: 명단 수정
> 사용자로서, 참가자를 추가/삭제/수정하여 원하는 명단으로 조 편성을 하고 싶다.

### US-04: 조장 고정 배치
> 사용자로서, 특정 인원(조장 등)을 미리 특정 조에 고정 배치하고 나머지만 랜덤 배분하고 싶다.

### US-05: 랜덤 신뢰도 검증
> 사용자로서, 랜덤 알고리즘이 공정한지 2,000회 시뮬레이션 결과를 시각화로 확인하고 싶다.

---

## 5. 기능 요구사항

### 5.1 참가자 관리

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| F-01 | 디폴트 명단 | 앱 로드 시 미리 정의된 참가자 명단이 표시됨 | P0 |
| F-02 | 참가자 추가 | 새로운 참가자 이름을 추가할 수 있음 | P0 |
| F-03 | 참가자 삭제 | 기존 참가자를 명단에서 삭제할 수 있음 | P0 |
| F-04 | 참가자 수정 | 기존 참가자 이름을 수정할 수 있음 | P0 |

### 5.2 고정 배치 (조장 기능)

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| F-05 | 조별 고정 멤버 설정 | 각 조(1~4조)에 고정 배치할 멤버를 지정할 수 있음 | P0 |
| F-06 | 고정 멤버 수정 | 조별 고정 멤버를 변경할 수 있음 | P0 |
| F-07 | 고정 멤버 표시 | 결과에서 고정 멤버는 별도 표시(⭐)로 구분됨 | P1 |

### 5.3 랜덤 배분

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| F-08 | 조 편성 실행 | 버튼 클릭 시 참가자를 4개 조로 랜덤 배분 | P0 |
| F-09 | 균등 배분 | 각 조의 인원 수가 최대한 균등하게 배분됨 | P0 |
| F-10 | 재배분 | 버튼 재클릭 시 새로운 랜덤 결과 생성 | P0 |

### 5.4 신뢰도 테스트

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| F-11 | 테스트 실행 | 테스트 버튼 클릭 시 2,000회 시뮬레이션 실행 | P0 |
| F-12 | 분포 시각화 | 각 참가자별 조 배분 횟수를 바 차트로 표시 | P0 |
| F-13 | 통계 표시 | 각 조별 배분 비율(%)과 횟수 표시 | P0 |
| F-14 | 균등성 판정 | 분포가 균등한지 여부를 메시지로 표시 | P1 |

---

## 6. 비기능 요구사항

| ID | 항목 | 요구사항 |
|----|------|----------|
| NF-01 | 성능 | 2,000회 시뮬레이션이 3초 이내 완료 |
| NF-02 | 호환성 | Chrome, Safari, Firefox, Edge 최신 버전 지원 |
| NF-03 | 반응형 | 데스크톱, 태블릿, 모바일 화면 지원 |
| NF-04 | 접근성 | 키보드 네비게이션 지원 |
| NF-05 | 오프라인 | 인터넷 연결 없이도 동작 (정적 파일) |
| NF-06 | 개인정보 | 서버 전송 없음, 모든 데이터는 클라이언트에서만 처리 |

---

## 7. UI/UX 명세

### 7.1 화면 구성

```
┌─────────────────────────────────────────────────┐
│  🎲 랜덤 조 편성기                     [테스트]  │
├─────────────────────────────────────────────────┤
│                                                 │
│  ⭐ 조별 고정 멤버 (조장)                        │
│  ┌───────────────────────────────────────────┐  │
│  │ 1조: [입력필드]  2조: [입력필드]          │  │
│  │ 3조: [입력필드]  4조: [입력필드]          │  │
│  └───────────────────────────────────────────┘  │
│                                                 │
│  👥 일반 참가자                                  │
│  ┌───────────────────────────────────────────┐  │
│  │ 이름1 [x]    이름2 [x]    이름3 [x]       │  │
│  │ 이름4 [x]    이름5 [x]    이름6 [x]       │  │
│  │ ...                                       │  │
│  │ [+ 참가자 추가]                           │  │
│  └───────────────────────────────────────────┘  │
│                                                 │
│              [ 🎲 조 편성하기 ]                  │
│                                                 │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐│
│  │   1조   │ │   2조   │ │   3조   │ │   4조   ││
│  │ ⭐조장1 │ │ ⭐조장2 │ │ ⭐조장3 │ │ ⭐조장4 ││
│  │  멤버A  │ │  멤버B  │ │  멤버C  │ │  멤버D  ││
│  │  멤버E  │ │  멤버F  │ │  멤버G  │ │  멤버H  ││
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘│
└─────────────────────────────────────────────────┘
```

### 7.2 테스트 결과 모달

```
┌─────────────────────────────────────────────────┐
│  📊 랜덤 분포 테스트 결과 (2,000회)        [X]  │
├─────────────────────────────────────────────────┤
│                                                 │
│  이름1:                                         │
│  1조 ████████████████████ 25.1% (502회)        │
│  2조 ███████████████████░ 24.8% (496회)        │
│  3조 ████████████████████ 25.0% (500회)        │
│  4조 ████████████████████ 25.1% (502회)        │
│                                                 │
│  이름2:                                         │
│  1조 ███████████████████░ 24.9% (498회)        │
│  2조 ████████████████████ 25.2% (504회)        │
│  3조 ████████████████████ 25.0% (500회)        │
│  4조 ███████████████████░ 24.9% (498회)        │
│                                                 │
│  ... (스크롤)                                   │
│                                                 │
│  ────────────────────────────────────────────   │
│  ✅ 결과: 균등 분포 확인됨 (최대 편차: 1.2%)     │
└─────────────────────────────────────────────────┘
```

### 7.3 인터랙션

| 요소 | 동작 |
|------|------|
| 참가자 [x] 버튼 | 해당 참가자 삭제 |
| 참가자 이름 클릭 | 인라인 수정 모드 |
| [+ 참가자 추가] | 새 입력 필드 추가 |
| [조 편성하기] | 랜덤 배분 실행, 결과 표시 |
| [테스트] | 2,000회 시뮬레이션 후 모달 표시 |

---

## 8. 기술 스택

| 구분 | 기술 |
|------|------|
| Frontend | HTML5, CSS3, Vanilla JavaScript (ES6+) |
| 스타일링 | 순수 CSS (외부 프레임워크 없음) |
| 시각화 | CSS 기반 바 차트 |
| 랜덤 알고리즘 | Fisher-Yates Shuffle |
| 배포 | GitHub Pages |
| 버전관리 | Git / GitHub |

---

## 9. 랜덤 알고리즘 명세

### 9.1 Fisher-Yates Shuffle
```javascript
function shuffle(array) {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
```

### 9.2 조 배분 로직
```
1. 고정 멤버를 각 조에 미리 배치
2. 일반 참가자 배열을 Fisher-Yates로 셔플
3. 셔플된 배열을 순서대로 1조→2조→3조→4조→1조... 순환 배분
4. 결과: 각 조 인원 차이가 최대 1명
```

---

## 10. 데이터 구조

### 10.1 참가자 데이터
```javascript
{
  leaders: {
    1: "조장1 이름",  // 1조 고정
    2: "조장2 이름",  // 2조 고정
    3: "조장3 이름",  // 3조 고정
    4: "조장4 이름"   // 4조 고정
  },
  participants: [
    "참가자1",
    "참가자2",
    // ...
  ]
}
```

### 10.2 결과 데이터
```javascript
{
  teams: {
    1: ["조장1", "참가자A", "참가자E", ...],
    2: ["조장2", "참가자B", "참가자F", ...],
    3: ["조장3", "참가자C", "참가자G", ...],
    4: ["조장4", "참가자D", "참가자H", ...]
  }
}
```

### 10.3 테스트 결과 데이터
```javascript
{
  simulations: 2000,
  results: {
    "참가자1": { 1: 502, 2: 496, 3: 500, 4: 502 },
    "참가자2": { 1: 498, 2: 504, 3: 500, 4: 498 },
    // ...
  },
  maxDeviation: 1.2  // 최대 편차 (%)
}
```

---

## 11. 디폴트 데이터

### 11.1 기본 조장 (4명)
```
1조: 김조장
2조: 이조장
3조: 박조장
4조: 최조장
```

### 11.2 기본 참가자 (12명)
```
홍길동, 김철수, 이영희, 박민수,
정수진, 강동원, 한지민, 송혜교,
유재석, 강호동, 이광수, 전소민
```

---

## 12. 배포 계획

### 12.1 GitHub Repository
- Repository 이름: `team-randomizer`
- 공개 설정: Public

### 12.2 GitHub Pages
- URL: `https://{username}.github.io/team-randomizer`
- Branch: `main` 또는 `gh-pages`
- 폴더: `/` (root)

### 12.3 파일 구조
```
team-randomizer/
├── index.html
├── style.css
├── script.js
└── README.md
```

---

## 13. 마일스톤

| 단계 | 내용 |
|------|------|
| M1 | 기본 UI 구현 (참가자 입력, 조 편성 결과) |
| M2 | 조장 고정 배치 기능 |
| M3 | 참가자 추가/삭제/수정 기능 |
| M4 | 신뢰도 테스트 및 시각화 |
| M5 | 반응형 디자인 및 스타일링 |
| M6 | GitHub Pages 배포 |

---

## 14. 제약사항

- 서버/DB 없음: 모든 로직은 클라이언트 사이드에서 처리
- 데이터 영속성 없음: 페이지 새로고침 시 초기화 (필요시 localStorage 확장 가능)
- 조 개수 고정: 4개 조로 고정 (추후 확장 가능)

---

## 15. 향후 확장 가능성 (Out of Scope)

- [ ] 조 개수 동적 변경
- [ ] 결과 URL 공유 기능
- [ ] 결과 이미지/텍스트 복사
- [ ] localStorage 저장
- [ ] 다국어 지원

---

## 문서 정보

| 항목 | 내용 |
|------|------|
| 버전 | 1.0 |
| 작성일 | 2026-01-11 |
| 상태 | Draft |
